{"version":3,"sources":["../../../src/infra/prisma/prisma.service.ts"],"sourcesContent":["import { INestApplication, Injectable, OnModuleInit } from '@nestjs/common';\nimport { PrismaClient } from '@prisma/client';\n\n@Injectable()\nexport class PrismaService extends PrismaClient implements OnModuleInit {\n  constructor() {\n    super({ log: ['error', 'query', 'info', 'warn'] });\n  }\n\n  async onModuleInit() {\n    await this.$connect();\n\n    this.$use(async (params, next) => {\n      return next(params);\n    });\n  }\n\n  async enableShutdownHooks(app: INestApplication) {\n    this.$on('beforeExit' as never, async () => {\n      await app.close();\n    });\n  }\n}\n"],"names":["PrismaService","PrismaClient","onModuleInit","$connect","$use","params","next","enableShutdownHooks","app","$on","close","constructor","log"],"mappings":";;;;+BAIaA;;;eAAAA;;;wBAJ8C;wBAC9B;;;;;;;;;;AAGtB,IAAA,AAAMA,gBAAN,MAAMA,sBAAsBC,oBAAY;IAK7C,MAAMC,eAAe;QACnB,MAAM,IAAI,CAACC,QAAQ;QAEnB,IAAI,CAACC,IAAI,CAAC,OAAOC,QAAQC;YACvB,OAAOA,KAAKD;QACd;IACF;IAEA,MAAME,oBAAoBC,GAAqB,EAAE;QAC/C,IAAI,CAACC,GAAG,CAAC,cAAuB;YAC9B,MAAMD,IAAIE,KAAK;QACjB;IACF;IAhBAC,aAAc;QACZ,KAAK,CAAC;YAAEC,KAAK;gBAAC;gBAAS;gBAAS;gBAAQ;aAAO;QAAC;IAClD;AAeF"}